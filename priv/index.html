<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Erlang web shell</title>

    <script src="/static/jquery.min.js"></script>
    <script src="/static/jquery.terminal-min.js"></script>
    <script src="/static/jquery.mousewheel-min.js"></script>

    <link href="/static/jquery.terminal.css" rel="stylesheet"/>

    <script type="text/javascript">
        var ws = null;

        jQuery(document).ready(function($) {
            $('body').terminal(function(command, term) {
                ws.send(command);
            }, {
                prompt: "> ",
                greetings: null,

                onInit: function(term) {
                    (init = function() {
                        ws = new WebSocket("ws://192.168.0.92:8080/websocket");

                        ws.onclose = function(evt) { init() };
                        ws.onerror = function(evt) { init() };

                        ws.onmessage = function(evt) { term.echo(evt.data) };
                    })();

                    ws.onopen = function(evt) {
                        ws.send("version")
                    };
                },
            });
        });
    </script>
  </head>

  <body class="terminal">
      <div class="terminal-output">
      </div>
  </body>
</html>
